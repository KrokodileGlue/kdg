# test 1
BEGIN_TEST
^(?>.*?!.*?(PRIVMSG|ACTION)\s)(?i)(.*?\s)?(?:re|hi)[.!]*(\s+.*)?$
END_TEST

BEGIN_CASE
user!host PRIVMSG before re after
EXPECT_OUTPUT
user!host PRIVMSG before re after
before
 after
END_CASE

# test 2
BEGIN_TEST
(a*)*
END_TEST

BEGIN_CASE
aaaa
EXPECT_OUTPUT
aaaa
END_CASE

# test 3
BEGIN_TEST
(?x)
^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9]|1[0-2])(\/|-|\.)
(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-|\.)29\3(?:(?:(?:
1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|
[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-|\.)(?:0?[1-9]|1\d|2
[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$
END_TEST

BEGIN_CASE
01-01-01
EXPECT_OUTPUT
01-01-01
-
END_CASE

BEGIN_CASE
12/31/01
EXPECT_OUTPUT
12/31/01
/
END_CASE

# test 4
BEGIN_TEST
(?<=foo)bar
END_TEST

BEGIN_CASE
foobar
EXPECT_OUTPUT
bar
END_CASE

BEGIN_CASE
foo bar
EXPECT_OUTPUT
no match.
END_CASE

# test 5
BEGIN_TEST
(?<=\d\d\dfoo)bar
END_TEST

BEGIN_CASE
123foobar
EXPECT_OUTPUT
bar
END_CASE

BEGIN_CASE
23foobar
EXPECT_OUTPUT
no match.
END_CASE

# test 6
BEGIN_TEST
a(?R)?b
END_TEST

BEGIN_CASE
aaaaaaaaaaaaaaaaaabbbbbbbbbbbb
EXPECT_OUTPUT
aaaaaaaaaaaabbbbbbbbbbbb
END_CASE

# test 7
BEGIN_TEST
(\w+) (?<=\1 )foo
END_TEST

BEGIN_CASE
word foo
EXPECT_OUTPUT
word foo
word
END_CASE

# test 8
BEGIN_TEST
(?i)(\w+) \1
END_TEST

BEGIN_CASE
word WORD
EXPECT_OUTPUT
word WORD
word
END_CASE

# test 9
BEGIN_TEST
[+-]?(\d+(\.\d+)?|\.\d+)([eE][+-]?\d+)?
END_TEST

BEGIN_CASE
-123.4e-56
EXPECT_OUTPUT
-123.4e-56
123.4
.4
e-56
END_CASE

BEGIN_CASE
12.e2
EXPECT_OUTPUT
12
12
END_CASE

# test 10
BEGIN_TEST
^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$
END_TEST

BEGIN_CASE
email@domain.com
EXPECT_OUTPUT
email@domain.com
END_CASE

BEGIN_CASE
email@domain.
EXPECT_OUTPUT
no match.
END_CASE

# test 11
BEGIN_TEST
(?>[^!]*+![^\s]*+\sPRIVMSG\s)(?i)(.*?\s)?(?:re|hi)[.!]*(\s+.*)?$
END_TEST

BEGIN_CASE
user!host PART PRIVMSG before re after
EXPECT_OUTPUT
no match.
END_CASE
